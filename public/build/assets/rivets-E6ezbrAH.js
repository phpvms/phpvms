function L(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function Q(k){if(k.__esModule)return k;var a=k.default;if(typeof a=="function"){var m=function w(){return this instanceof w?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};m.prototype=a.prototype}else m={};return Object.defineProperty(m,"__esModule",{value:!0}),Object.keys(k).forEach(function(w){var A=Object.getOwnPropertyDescriptor(k,w);Object.defineProperty(m,w,A.get?A:{enumerable:!0,get:function(){return k[w]}})}),m}var F={exports:{}},U={exports:{}},D=U.exports,S;function I(){return S||(S=1,function(k){(function(){function a(p,f,_,O){return new m(p,f,_,O)}a.adapters={};function m(p,f,_,O){this.options=O||{},this.options.adapters=this.options.adapters||{},this.obj=p,this.keypath=f,this.callback=_,this.objectPath=[],this.update=this.update.bind(this),this.parse(),w(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}m.tokenize=function(p,f,_){var O=[],E={i:_,path:""},T,t;for(T=0;T<p.length;T++)t=p.charAt(T),~f.indexOf(t)?(O.push(E),E={i:t,path:""}):E.path+=t;return O.push(E),O},m.prototype.parse=function(){var p=this.interfaces(),f,_;p.length||A("Must define at least one adapter interface."),~p.indexOf(this.keypath[0])?(f=this.keypath[0],_=this.keypath.substr(1)):(typeof(f=this.options.root||a.root)>"u"&&A("Must define a default root adapter."),_=this.keypath),this.tokens=m.tokenize(_,p,f),this.key=this.tokens.pop()},m.prototype.realize=function(){var p=this.obj,f=!1,_;return this.tokens.forEach(function(O,E){w(p)?(typeof this.objectPath[E]<"u"?p!==(_=this.objectPath[E])&&(this.set(!1,O,_,this.update),this.set(!0,O,p,this.update),this.objectPath[E]=p):(this.set(!0,O,p,this.update),this.objectPath[E]=p),p=this.get(O,p)):(f===!1&&(f=E),(_=this.objectPath[E])&&this.set(!1,O,_,this.update))},this),f!==!1&&this.objectPath.splice(f),p},m.prototype.update=function(){var p,f;(p=this.realize())!==this.target&&(w(this.target)&&this.set(!1,this.key,this.target,this.callback),w(p)&&this.set(!0,this.key,p,this.callback),f=this.value(),this.target=p,(this.value()instanceof Function||this.value()!==f)&&this.callback())},m.prototype.value=function(){if(w(this.target))return this.get(this.key,this.target)},m.prototype.setValue=function(p){w(this.target)&&this.adapter(this.key).set(this.target,this.key.path,p)},m.prototype.get=function(p,f){return this.adapter(p).get(f,p.path)},m.prototype.set=function(p,f,_,O){var E=p?"observe":"unobserve";this.adapter(f)[E](_,f.path,O)},m.prototype.interfaces=function(){var p=Object.keys(this.options.adapters);return Object.keys(a.adapters).forEach(function(f){~p.indexOf(f)||p.push(f)}),p},m.prototype.adapter=function(p){return this.options.adapters[p.i]||a.adapters[p.i]},m.prototype.unobserve=function(){var p;this.tokens.forEach(function(f,_){(p=this.objectPath[_])&&this.set(!1,f,p,this.update)},this),w(this.target)&&this.set(!1,this.key,this.target,this.callback)};function w(p){return typeof p=="object"&&p!==null}function A(p){throw new Error("[sightglass] "+p)}k.exports?k.exports=a:this.sightglass=a}).call(D)}(U)),U.exports}var z=F.exports,$;function H(){return $||($=1,function(k){(function(){var a,m,w,A,p,f=function(t,e){return function(){return t.apply(e,arguments)}},_=[].slice,O={}.hasOwnProperty,E=function(t,e){for(var i in e)O.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},T=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};a={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],public:{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,i){return this.call(t,e,i.view.models)},configure:function(t){var e,i,n,r;t==null&&(t={});for(n in t)if(r=t[n],n==="binders"||n==="components"||n==="formatters"||n==="adapters")for(i in r)e=r[i],a[n][i]=e;else a.public[n]=r},bind:function(t,e,i){var n;return e==null&&(e={}),i==null&&(i={}),n=new a.View(t,e,i),n.bind(),n},init:function(t,e,i){var n,r,s;if(i==null&&(i={}),e==null&&(e=document.createElement("div")),t=a.public.components[t],r=t.template.call(this,e),r instanceof HTMLElement){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}else e.innerHTML=r;return n=t.initialize.call(this,e,i),s=new a.View(e,n),s.bind(),s}}},window.jQuery||window.$?(w=window.jQuery||window.$,p="on"in w.prototype?["on","off"]:["bind","unbind"],m=p[0],A=p[1],a.Util={bindEvent:function(t,e,i){return w(t)[m](e,i)},unbindEvent:function(t,e,i){return w(t)[A](e,i)},getInputValue:function(t){var e;return e=w(t),e.attr("type")==="checkbox"?e.is(":checked"):e.val()}}):a.Util={bindEvent:function(){return"addEventListener"in window?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(),unbindEvent:function(){return"removeEventListener"in window?function(t,e,i){return t.removeEventListener(e,i,!1)}:function(t,e,i){return t.detachEvent("on"+e,i)}}(),getInputValue:function(t){var e,i,n,r;if(t.type==="checkbox")return t.checked;if(t.type==="select-multiple"){for(r=[],i=0,n=t.length;i<n;i++)e=t[i],e.selected&&r.push(e.value);return r}else return t.value}},a.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(e){return/^'.*'$|^".*"$/.test(e)?{type:this.types.primitive,value:e.slice(1,-1)}:e==="true"?{type:this.types.primitive,value:!0}:e==="false"?{type:this.types.primitive,value:!1}:e==="null"?{type:this.types.primitive,value:null}:e==="undefined"?{type:this.types.primitive,value:void 0}:e===""?{type:this.types.primitive,value:void 0}:isNaN(Number(e))===!1?{type:this.types.primitive,value:Number(e)}:{type:this.types.keypath,value:e}},t}(),a.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(e,i){var n,r,s,o,u,h,l;for(h=[],o=e.length,n=0,r=0;r<o;)if(n=e.indexOf(i[0],r),n<0){h.push({type:this.types.text,value:e.slice(r)});break}else{if(n>0&&r<n&&h.push({type:this.types.text,value:e.slice(r,n)}),r=n+i[0].length,n=e.indexOf(i[1],r),n<0){u=e.slice(r-i[1].length),s=h[h.length-1],(s!=null?s.type:void 0)===this.types.text?s.value+=u:h.push({type:this.types.text,value:u});break}l=e.slice(r,n).trim(),h.push({type:this.types.binding,value:l}),r=n+i[1].length}return h},t}(),a.View=function(){function t(e,i,n){var r,s,o,u,h,l,d,b,c,g,v,y,x;for(this.els=e,this.models=i,n==null&&(n={}),this.update=f(this.update,this),this.publish=f(this.publish,this),this.sync=f(this.sync,this),this.unbind=f(this.unbind,this),this.bind=f(this.bind,this),this.select=f(this.select,this),this.traverse=f(this.traverse,this),this.build=f(this.build,this),this.buildBinding=f(this.buildBinding,this),this.bindingRegExp=f(this.bindingRegExp,this),this.options=f(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),c=a.extensions,h=0,d=c.length;h<d;h++){if(s=c[h],this[s]={},n[s]){g=n[s];for(r in g)o=g[r],this[s][r]=o}v=a.public[s];for(r in v)o=v[r],(u=this[s])[r]==null&&(u[r]=o)}for(y=a.options,l=0,b=y.length;l<b;l++)s=y[l],this[s]=(x=n[s])!=null?x:a.public[s];this.build()}return t.prototype.options=function(){var e,i,n,r,s;for(i={},s=a.extensions.concat(a.options),n=0,r=s.length;n<r;n++)e=s[n],i[e]=this[e];return i},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(e,i,n,r){var s,o,u,h,l,d,b;return l={},b=function(){var c,g,v,y;for(v=r.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g),y=[],c=0,g=v.length;c<g;c++)d=v[c],y.push(d.trim());return y}(),s=function(){var c,g,v,y;for(v=b.shift().split("<"),y=[],c=0,g=v.length;c<g;c++)o=v[c],y.push(o.trim());return y}(),h=s.shift(),l.formatters=b,(u=s.shift())&&(l.dependencies=u.split(/\s+/)),this.bindings.push(new a[e](this,i,n,h,l))},t.prototype.build=function(){var e,i,n,r,s;for(this.bindings=[],i=function(o){return function(u){var h,l,d,b,c,g,v,y,x,N,P,V,R;if(u.nodeType===3){if(c=a.TextTemplateParser,(d=o.templateDelimiters)&&(y=c.parse(u.data,d)).length&&!(y.length===1&&y[0].type===c.types.text)){for(x=0,P=y.length;x<P;x++)v=y[x],g=document.createTextNode(v.value),u.parentNode.insertBefore(g,u),v.type===1&&o.buildBinding("TextBinding",g,null,v.value);u.parentNode.removeChild(u)}}else u.nodeType===1&&(h=o.traverse(u));if(!h)for(R=function(){var B,j,C,M;for(C=u.childNodes,M=[],B=0,j=C.length;B<j;B++)b=C[B],M.push(b);return M}(),N=0,V=R.length;N<V;N++)l=R[N],i(l)}}(this),s=this.els,n=0,r=s.length;n<r;n++)e=s[n],i(e);this.bindings.sort(function(o,u){var h,l;return(((h=u.binder)!=null?h.priority:void 0)||0)-(((l=o.binder)!=null?l.priority:void 0)||0)})},t.prototype.traverse=function(e){var i,n,r,s,o,u,h,l,d,b,c,g,v,y,x,N;for(s=this.bindingRegExp(),o=e.nodeName==="SCRIPT"||e.nodeName==="STYLE",y=e.attributes,b=0,g=y.length;b<g;b++)if(i=y[b],s.test(i.name)){if(l=i.name.replace(s,""),!(r=this.binders[l])){x=this.binders;for(u in x)d=x[u],u!=="*"&&u.indexOf("*")!==-1&&(h=new RegExp("^"+u.replace(/\*/g,".+")+"$"),h.test(l)&&(r=d))}r||(r=this.binders["*"]),r.block&&(o=!0,n=[i])}for(N=n||e.attributes,c=0,v=N.length;c<v;c++)i=N[c],s.test(i.name)&&(l=i.name.replace(s,""),this.buildBinding("Binding",e,l,i.value));return o||(l=e.nodeName.toLowerCase(),this.components[l]&&!e._bound&&(this.bindings.push(new a.ComponentBinding(this,e,l)),o=!0)),o},t.prototype.select=function(e){var i,n,r,s,o;for(s=this.bindings,o=[],n=0,r=s.length;n<r;n++)i=s[n],e(i)&&o.push(i);return o},t.prototype.bind=function(){var e,i,n,r;for(r=this.bindings,i=0,n=r.length;i<n;i++)e=r[i],e.bind()},t.prototype.unbind=function(){var e,i,n,r;for(r=this.bindings,i=0,n=r.length;i<n;i++)e=r[i],e.unbind()},t.prototype.sync=function(){var e,i,n,r;for(r=this.bindings,i=0,n=r.length;i<n;i++)e=r[i],typeof e.sync=="function"&&e.sync()},t.prototype.publish=function(){var e,i,n,r;for(r=this.select(function(s){var o;return(o=s.binder)!=null?o.publishes:void 0}),i=0,n=r.length;i<n;i++)e=r[i],e.publish()},t.prototype.update=function(e){var i,n,r,s,o,u;e==null&&(e={});for(n in e)r=e[n],this.models[n]=r;for(u=this.bindings,s=0,o=u.length;s<o;s++)i=u[s],typeof i.update=="function"&&i.update(e)},t}(),a.Binding=function(){function t(e,i,n,r,s){this.view=e,this.el=i,this.type=n,this.keypath=r,this.options=s??{},this.getValue=f(this.getValue,this),this.update=f(this.update,this),this.unbind=f(this.unbind,this),this.bind=f(this.bind,this),this.publish=f(this.publish,this),this.sync=f(this.sync,this),this.set=f(this.set,this),this.eventHandler=f(this.eventHandler,this),this.formattedValue=f(this.formattedValue,this),this.parseFormatterArguments=f(this.parseFormatterArguments,this),this.parseTarget=f(this.parseTarget,this),this.observe=f(this.observe,this),this.setBinder=f(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,i,n,r;if(!(this.binder=this.view.binders[this.type])){r=this.view.binders;for(e in r)n=r[e],e!=="*"&&e.indexOf("*")!==-1&&(i=new RegExp("^"+e.replace(/\*/g,".+")+"$"),i.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+e.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}if(this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function)return this.binder={routine:this.binder}},t.prototype.observe=function(e,i,n){return a.sightglass(e,i,n,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var e;return e=a.TypeParser.parse(this.keypath),e.type===a.TypeParser.types.primitive?this.value=e.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.parseFormatterArguments=function(e,i){var n,r,s,o,u,h,l;for(e=function(){var d,b,c;for(c=[],d=0,b=e.length;d<b;d++)r=e[d],c.push(a.TypeParser.parse(r));return c}(),o=[],n=h=0,l=e.length;h<l;n=++h)r=e[n],o.push(r.type===a.TypeParser.types.primitive?r.value:((u=this.formatterObservers)[i]||(u[i]={}),(s=this.formatterObservers[i][n])||(s=this.observe(this.view.models,r.value,this.sync),this.formatterObservers[i][n]=s),s.value()));return o},t.prototype.formattedValue=function(e){var i,n,r,s,o,u,h,l,d;for(l=this.formatters,n=u=0,h=l.length;u<h;n=++u)r=l[n],i=r.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),s=i.shift(),r=this.view.formatters[s],o=this.parseFormatterArguments(i,n),(r!=null?r.read:void 0)instanceof Function?e=(d=r.read).call.apply(d,[this.model,e].concat(_.call(o))):r instanceof Function&&(e=r.call.apply(r,[this.model,e].concat(_.call(o))));return e},t.prototype.eventHandler=function(e){var i,n;return n=(i=this).view.handler,function(r){return n.call(e,this,r,i)}},t.prototype.set=function(e){var i;return e=e instanceof Function&&!this.binder.function&&a.public.executeFunctions?this.formattedValue(e.call(this.model)):this.formattedValue(e),(i=this.binder.routine)!=null?i.call(this,this.el,e):void 0},t.prototype.sync=function(){var e,i;return this.set((function(){var n,r,s,o,u,h,l;if(this.observer){if(this.model!==this.observer.target){for(u=this.dependencies,n=0,s=u.length;n<s;n++)i=u[n],i.unobserve();if(this.dependencies=[],(this.model=this.observer.target)!=null&&((h=this.options.dependencies)!=null&&h.length))for(l=this.options.dependencies,r=0,o=l.length;r<o;r++)e=l[r],i=this.observe(this.model,e,this.sync),this.dependencies.push(i)}return this.observer.value()}else return this.value}).call(this))},t.prototype.publish=function(){var e,i,n,r,s,o,u,h,l,d,b,c,g;if(this.observer){for(h=this.getValue(this.el),o=this.formatters.length-1,b=this.formatters.slice(0).reverse(),n=l=0,d=b.length;l<d;n=++l)r=b[n],i=o-n,e=r.split(/\s+/),s=e.shift(),u=this.parseFormatterArguments(e,i),(c=this.view.formatters[s])!=null&&c.publish&&(h=(g=this.view.formatters[s]).publish.apply(g,[h].concat(_.call(u))));return this.observer.setValue(h)}},t.prototype.bind=function(){var e,i,n,r,s,o,u;if(this.parseTarget(),(s=this.binder.bind)!=null&&s.call(this,this.el),this.model!=null&&((o=this.options.dependencies)!=null&&o.length))for(u=this.options.dependencies,n=0,r=u.length;n<r;n++)e=u[n],i=this.observe(this.model,e,this.sync),this.dependencies.push(i);if(this.view.preloadData)return this.sync()},t.prototype.unbind=function(){var e,i,n,r,s,o,u,h,l,d;for((u=this.binder.unbind)!=null&&u.call(this,this.el),(h=this.observer)!=null&&h.unobserve(),l=this.dependencies,s=0,o=l.length;s<o;s++)r=l[s],r.unobserve();this.dependencies=[],d=this.formatterObservers;for(n in d){i=d[n];for(e in i)r=i[e],r.unobserve()}return this.formatterObservers={}},t.prototype.update=function(e){var i,n;return e==null&&(e={}),this.model=(i=this.observer)!=null?i.target:void 0,(n=this.binder.update)!=null?n.call(this,e):void 0},t.prototype.getValue=function(e){return this.binder&&this.binder.getValue!=null?this.binder.getValue.call(this,e):a.Util.getInputValue(e)},t}(),a.ComponentBinding=function(t){E(e,t);function e(i,n,r){var s,o,u,h,l,d,b,c;for(this.view=i,this.el=n,this.type=r,this.unbind=f(this.unbind,this),this.bind=f(this.bind,this),this.locals=f(this.locals,this),this.component=this.view.components[this.type],this.static={},this.observers={},this.upstreamObservers={},o=i.bindingRegExp(),b=this.el.attributes||[],l=0,d=b.length;l<d;l++)s=b[l],o.test(s.name)||(u=this.camelCase(s.name),h=a.TypeParser.parse(s.value),T.call((c=this.component.static)!=null?c:[],u)>=0?this.static[u]=s.value:h.type===a.TypeParser.types.primitive?this.static[u]=h.value:this.observers[u]=s.value)}return e.prototype.sync=function(){},e.prototype.update=function(){},e.prototype.publish=function(){},e.prototype.locals=function(){var i,n,r,s,o,u;r={},o=this.static;for(i in o)s=o[i],r[i]=s;u=this.observers;for(i in u)n=u[i],r[i]=n.value();return r},e.prototype.camelCase=function(i){return i.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()})},e.prototype.bind=function(){var i,n,r,s,o,u,h,l,d,b,c,g,v,y,x,N,P,V,R,B;if(!this.bound){y=this.observers;for(n in y)r=y[n],this.observers[n]=this.observe(this.view.models,r,function(j){return function(C){return function(){return j.componentView.models[C]=j.observers[C].value()}}}(this).call(this,n));this.bound=!0}if(this.componentView!=null)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),h=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,u={},x=a.extensions,b=0,g=x.length;b<g;b++){if(o=x[b],u[o]={},this.component[o]){N=this.component[o];for(i in N)l=N[i],u[o][i]=l}P=this.view[o];for(i in P)l=P[i],(d=u[o])[i]==null&&(d[i]=l)}for(V=a.options,c=0,v=V.length;c<v;c++)o=V[c],u[o]=(R=this.component[o])!=null?R:this.view[o];this.componentView=new a.View(Array.prototype.slice.call(this.el.childNodes),h,u),this.componentView.bind(),B=this.observers;for(n in B)s=B[n],this.upstreamObservers[n]=this.observe(this.componentView.models,n,function(j){return function(C,M){return function(){return M.setValue(j.componentView.models[C])}}}(this).call(this,n,s))}},e.prototype.unbind=function(){var i,n,r,s,o;r=this.upstreamObservers;for(i in r)n=r[i],n.unobserve();s=this.observers;for(i in s)n=s[i],n.unobserve();return(o=this.componentView)!=null?o.unbind.call(this):void 0},e}(a.Binding),a.TextBinding=function(t){E(e,t);function e(i,n,r,s,o){this.view=i,this.el=n,this.type=r,this.keypath=s,this.options=o??{},this.sync=f(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return e.prototype.binder={routine:function(i,n){return i.data=n??""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(a.Binding),a.public.binders.text=function(t,e){return t.textContent!=null?t.textContent=e??"":t.innerText=e??""},a.public.binders.html=function(t,e){return t.innerHTML=e??""},a.public.binders.show=function(t,e){return t.style.display=e?"":"none"},a.public.binders.hide=function(t,e){return t.style.display=e?"none":""},a.public.binders.enabled=function(t,e){return t.disabled=!e},a.public.binders.disabled=function(t,e){return t.disabled=!!e},a.public.binders.checked={publishes:!0,priority:2e3,bind:function(t){return a.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return a.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return t.type==="radio"?t.checked=((i=t.value)!=null?i.toString():void 0)===(e!=null?e.toString():void 0):t.checked=!!e}},a.public.binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return a.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return a.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return t.type==="radio"?t.checked=((i=t.value)!=null?i.toString():void 0)!==(e!=null?e.toString():void 0):t.checked=!e}},a.public.binders.value={publishes:!0,priority:3e3,bind:function(t){if(!(t.tagName==="INPUT"&&t.type==="radio"))return this.event=t.tagName==="SELECT"?"change":"input",a.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){if(!(t.tagName==="INPUT"&&t.type==="radio"))return a.Util.unbindEvent(t,this.event,this.publish)},routine:function(t,e){var i,n,r,s,o,u,h;if(t.tagName==="INPUT"&&t.type==="radio")return t.setAttribute("value",e);if(window.jQuery!=null){if(t=w(t),(e!=null?e.toString():void 0)!==((s=t.val())!=null?s.toString():void 0))return t.val(e??"")}else if(t.type==="select-multiple"){if(e!=null){for(h=[],n=0,r=t.length;n<r;n++)i=t[n],h.push(i.selected=(o=i.value,T.call(e,o)>=0));return h}}else if((e!=null?e.toString():void 0)!==((u=t.value)!=null?u.toString():void 0))return t.value=e??""}},a.public.binders.if={block:!0,priority:4e3,bind:function(t){var e,i;if(this.marker==null)return e=[this.view.prefix,this.type].join("-").replace("--","-"),i=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+i+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)},unbind:function(){if(this.nested)return this.nested.unbind(),this.bound=!1},routine:function(t,e){var i,n,r,s;if(!!e==!this.bound)if(e){r={},s=this.view.models;for(i in s)n=s[i],r[i]=n;return(this.nested||(this.nested=new a.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}else return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1},update:function(t){var e;return(e=this.nested)!=null?e.update(t):void 0}},a.public.binders.unless={block:!0,priority:4e3,bind:function(t){return a.public.binders.if.bind.call(this,t)},unbind:function(){return a.public.binders.if.unbind.call(this)},routine:function(t,e){return a.public.binders.if.routine.call(this,t,!e)},update:function(t){return a.public.binders.if.update.call(this,t)}},a.public.binders["on-*"]={function:!0,priority:1e3,unbind:function(t){if(this.handler)return a.Util.unbindEvent(t,this.args[0],this.handler)},routine:function(t,e){return this.handler&&a.Util.unbindEvent(t,this.args[0],this.handler),a.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(e))}},a.public.binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,i,n,r,s;if(this.marker==null)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(s=this.iterated,n=0,r=s.length;n<r;n++)i=s[n],i.bind()},unbind:function(t){var e,i,n,r;if(this.iterated!=null)for(r=this.iterated,i=0,n=r.length;i<n;i++)e=r[i],e.unbind()},routine:function(t,e){var i,n,r,s,o,u,h,l,d,b,c,g,v,y,x,N,P,V,R;if(u=this.args[0],e=e||[],this.iterated.length>e.length)for(P=Array(this.iterated.length-e.length),c=0,y=P.length;c<y;c++)P[c],b=this.iterated.pop(),b.unbind(),this.marker.parentNode.removeChild(b.els[0]);for(r=g=0,x=e.length;g<x;r=++g)if(o=e[r],n={index:r},n[a.public.iterationAlias(u)]=r,n[u]=o,this.iterated[r]==null){V=this.view.models;for(s in V)o=V[s],n[s]==null&&(n[s]=o);l=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,h=this.view.options(),h.preloadData=!0,d=t.cloneNode(!0),b=new a.View(d,n,h),b.bind(),this.iterated.push(b),this.marker.parentNode.insertBefore(d,l.nextSibling)}else this.iterated[r].models[u]!==o&&this.iterated[r].update(n);if(t.nodeName==="OPTION")for(R=this.view.bindings,v=0,N=R.length;v<N;v++)i=R[v],i.el===this.marker.parentNode&&i.type==="value"&&i.sync()},update:function(t){var e,i,n,r,s,o,u;e={};for(i in t)n=t[i],i!==this.args[0]&&(e[i]=n);for(u=this.iterated,s=0,o=u.length;s<o;s++)r=u[s],r.update(e)}},a.public.binders["class-*"]=function(t,e){var i;if(i=" "+t.className+" ",!e==(i.indexOf(" "+this.args[0]+" ")!==-1))return t.className=e?""+t.className+" "+this.args[0]:i.replace(" "+this.args[0]+" "," ").trim()},a.public.binders["*"]=function(t,e){return e!=null?t.setAttribute(this.type,e):t.removeAttribute(this.type)},a.public.formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],e.call.apply(e,[this].concat(_.call(t)))},a.public.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,i,n;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(i=this.weakmap)[n=t[this.id]]||(i[n]={callbacks:{}})},cleanupWeakReference:function(t,e){if(!Object.keys(t.callbacks).length&&!(t.pointers&&Object.keys(t.pointers).length))return delete this.weakmap[e]},stubFunction:function(t,e){var i,n,r;return n=t[e],i=this.weakReference(t),r=this.weakmap,t[e]=function(){var s,o,u,h,l,d,b,c,g,v;h=n.apply(t,arguments),b=i.pointers;for(u in b)for(o=b[u],v=(c=(g=r[u])!=null?g.callbacks[o]:void 0)!=null?c:[],l=0,d=v.length;l<d;l++)s=v[l],s();return h}},observeMutations:function(t,e,i){var n,r,s,o,u,h;if(Array.isArray(t)){if(s=this.weakReference(t),s.pointers==null)for(s.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],u=0,h=r.length;u<h;u++)n=r[u],this.stubFunction(t,n);if((o=s.pointers)[e]==null&&(o[e]=[]),T.call(s.pointers[e],i)<0)return s.pointers[e].push(i)}},unobserveMutations:function(t,e,i){var n,r,s;if(Array.isArray(t)&&t[this.id]!=null&&(r=this.weakmap[t[this.id]])&&(s=r.pointers[e]))return(n=s.indexOf(i))>=0&&s.splice(n,1),s.length||delete r.pointers[e],this.cleanupWeakReference(r,t[this.id])},observe:function(t,e,i){var n,r,s;return n=this.weakReference(t).callbacks,n[e]==null&&(n[e]=[],r=Object.getOwnPropertyDescriptor(t,e),r!=null&&r.get||r!=null&&r.set||(s=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return s},set:function(o){return function(u){var h,l,d,b,c;if(u!==s&&(o.unobserveMutations(s,t[o.id],e),s=u,l=o.weakmap[t[o.id]])){if(n=l.callbacks,n[e])for(c=n[e].slice(),d=0,b=c.length;d<b;d++)h=c[d],T.call(n[e],h)>=0&&h();return o.observeMutations(u,t[o.id],e)}}}(this)}))),T.call(n[e],i)<0&&n[e].push(i),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,i){var n,r,s;if((s=this.weakmap[t[this.id]])&&(n=s.callbacks[e]))return(r=n.indexOf(i))>=0&&(n.splice(r,1),n.length||(delete s.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(s,t[this.id])},get:function(t,e){return t[e]},set:function(t,e,i){return t[e]=i}},a.factory=function(t){return a.sightglass=t,a.public._=a,a.public},typeof(k!==null?k.exports:void 0)=="object"?k.exports=a.factory(I()):this.rivets=a.factory(sightglass)}).call(z)}(F)),F.exports}var q=H();const W=L(q);export{L as a,Q as g,W as r};
